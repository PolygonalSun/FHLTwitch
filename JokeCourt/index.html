<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <title>Joke Court!</title>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <meta name="description" content="Babylon.js scene demonstrating how to use twitch integration with a 3d generated elements">
  <meta name="keywords" content="Babylon.js, OBS, streamer, twitch, joke">

  <meta name="obs-width" content="1920">
  <meta name="obs-height" content="1080">
  <meta name="obs-fps" content="60">
  <meta name="obs-shutdown" content="true">
  <meta name="obs-refresh" content="false">

  <meta name="obs-browser" content="width=1920,height=1080,fps=60,shutdown=true,refresh=false">


  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

  <style>
	/* Style reset */
	/* http://meyerweb.com/eric/tools/css/reset/
	   v2.0 | 20110126
	   License: none (public domain)
	*/

	html, body, div, span, applet, object, iframe,
	h1, h2, h3, h4, h5, h6, p, blockquote, pre,
	a, abbr, acronym, address, big, cite, code,
	del, dfn, em, img, ins, kbd, q, s, samp,
	small, strike, strong, sub, sup, tt, var,
	b, u, i, center,
	dl, dt, dd, ol, ul, li,
	fieldset, form, label, legend,
	table, caption, tbody, tfoot, thead, tr, th, td,
	article, aside, canvas, details, embed,
	figure, figcaption, footer, header, hgroup,
	menu, nav, output, ruby, section, summary,
	time, mark, audio, video {
		margin: 0;
		padding: 0;
		border: 0;
		font-size: 100%;
		font: inherit;
		vertical-align: baseline;
	}
	/* HTML5 display-role reset for older browsers */
	article, aside, details, figcaption, figure,
	footer, header, hgroup, menu, nav, section {
		display: block;
	}
	body {
		line-height: 1;
	}
	ol, ul {
		list-style: none;
	}
	blockquote, q {
		quotes: none;
	}
	blockquote:before, blockquote:after,
	q:before, q:after {
		content: '';
		content: none;
	}
	table {
		border-collapse: collapse;
		border-spacing: 0;
	}
	/* End of style reset */

	body {
		font-family: "Open Sans", sans-serif;
		color: white;
	}

	p + h1, p + h2, p + h3, p + h4, p + h5 {
		margin-top: 32px;
	}

	p + p {
		margin-top: 24px;
	}

	.main_slant {
		position: absolute;
		width: 200%;
		left: -50%;
	}

	#bg_slant1 {
		left: -80%;
		bottom: -20%;
		height: 75%;
		width: 250%;
		background: #202d6f;
		transform: rotate(15deg);
	}

	#bg_slant2 {
		height: 200px;
		background: #1c2b71;
		transform: rotate(1deg);
		top: -50px;
	}

	#bg_slant3 {
		height: 500px;
		background: #0C1633;
		transform: rotate(-8deg);
		bottom: -200px;
	}

	.bs-page {
		background: #16245800;
		font-size: 24px;
		position: relative;
		line-height: 30px;
		text-align: center;
		padding: 0%;
		width: 100vw;
		height: 100vh;
		box-sizing: border-box;
		overflow: hidden;
	}

	.bs-container {
		position: relative;
		max-width: 800px;
		margin: 0px auto;
	}

	.bs-image {
		display: block;
		margin: 40px;
		margin: 40px auto;
	}

    .fill-container {
        width: 100%;
        height: 100%;
    }
  </style>

    <script src="https://preview.babylonjs.com/babylon.js"></script>
    <script src="https://preview.babylonjs.com/recast.js"></script>
    <script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
    <script src="https://code.jquery.com/pep/0.4.3/pep.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/BabylonJS/Extensions@master/MeshWriter/meshwriter.min.js"></script>

</head>

<body>

<div id="wrapper">

    <div class="bs-page">
        <canvas id="bjsCanvas"; class="fill-container"></canvas>
    </div>
</div>

<script>
    var canvas = document.getElementById("bjsCanvas"); // Get the canvas element
    var engine = new BABYLON.Engine(canvas, true); // Generate the BABYLON 3D engine

    /******* Add the create scene function ******/
    var createScene = function () {
        let scene = new BABYLON.Scene(engine);
        scene.clearColor = new BABYLON.Color4(0, 0, 0, 0);

        // setup the main camera for the scene and give it control limits
        let mainCam = new BABYLON.ArcRotateCamera("mainCam", BABYLON.Tools.ToRadians(-90), BABYLON.Tools.ToRadians(90), 10, new BABYLON.Vector3(0, 0, 0), scene);

        mainCam.attachControl(canvas, true);

        var make3dText = function(text, scene, scaleX, scaleY, colorHex, height, thickness, position){
            const Writer = BABYLON.MeshWriter(scene, {scaleX:scaleY});
            const textWriter = new Writer(
                text,
                {
                    "anchor": "center",
                    "letter-height": height,
                    "color": colorHex,
                    "letter-thickness": thickness,
                    "position": {
                        x : position.x,
                        y : position.y,
                        z : position.z
                    }
                }
            );
            textWriter.getMesh().rotate(BABYLON.Vector3.Right(), -Math.PI/2);
            return textWriter;
        }

        let jokePosition = new BABYLON.Vector3(0, 0.75, 0);
        let punchlinePosition = new BABYLON.Vector3(0, -0.75, 0);
        let fullJokeText = "This is a joke.";
        let fullPunchlineText = "This is a punchline.";

        let jokeText = make3dText(fullJokeText, scene, 1, 1, "#CCF3F8", 1, 0.2, jokePosition);
        let punchlineText = make3dText(fullPunchlineText, scene, 1, 1, "#F8D1CC", 1, 0.2, punchlinePosition);

        /* return the initialized scene */
        return scene;
    }


    /******* End of the create scene function ******/
    var scene = createScene(); //Call the createScene function

    // Register a render loop to repeatedly render the scene
    engine.runRenderLoop(function () {
            scene.render();
    });

    // Watch for browser/canvas resize events
    window.addEventListener("resize", function () {
            engine.resize();
    });
</script>

</body>